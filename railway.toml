[build]
builder = "NIXPACKS"

[build.env]
NPM_CONFIG_PRODUCTION = "false"

[deploy]
healthcheckPath = "/"
healthcheckTimeout = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Railway Cron Jobs - Auto-scraping every 1 minute
[[crons]]
command = "curl -X POST https://$RAILWAY_PUBLIC_DOMAIN/api/scrape-cron -H 'Authorization: Bearer $CRON_SECRET'"
schedule = "* * * * *"

[env]
NODE_ENV = "production"
LOG_LEVEL = "info"
SCRAPER_URL = "https://himalayareload.otoreport.com/harga.js.php?id=b61804374cb7e3d207028ac05b492f82265047801111a2c0bc3bb288a7a843341b24cdc21347fbc9ba602392b435df468647-6"
# Generate a random secret for cron authentication
# CRON_SECRET = "your_random_secret_here"
TELEGRAM_BOT_TOKEN = ""
TELEGRAM_CHAT_ID = ""
